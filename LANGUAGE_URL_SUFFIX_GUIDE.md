# Руководство по языковым суффиксам в URL

## Обзор

Реализована система языковых суффиксов для URL, где:
- **Английский язык** остается без префикса (как есть)
- **Другие языки** получают суффикс языка в конце slug'а

## Примеры URL

### Английский (без суффикса)
- `/about/dr-serge-tunitski` - О докторе
- `/gynecology/uterine-fibroids` - Миома матки
- `/surgery/laparoscopic-myomectomy` - Лапароскопическая миомэктомия

### Русский (с суффиксом -ru)
- `/about/dr-serge-tunitski-ru` - О докторе
- `/gynecology/uterine-fibroids-ru` - Миома матки
- `/surgery/laparoscopic-myomectomy-ru` - Лапароскопическая миомэктомия

### Немецкий (с суффиксом -de)
- `/about/dr-serge-tunitski-de` - О докторе
- `/gynecology/uterine-fibroids-de` - Миома матки
- `/surgery/laparoscopic-myomectomy-de` - Лапароскопическая миомэктомия

### И так далее для всех языков:
- Французский: `-fr`
- Испанский: `-es`
- Иврит: `-he`
- Арабский: `-ar`

## Статические страницы

Статические страницы (без slug'а) остаются без изменений:
- `/about` - О нас
- `/gynecology` - Гинекология
- `/surgery` - Хирургия
- `/contact` - Контакты
- `/privacy-policy` - Политика конфиденциальности
- `/accessibility-statement` - Заявление о доступности
- `/sitemap` - Карта сайта

## Реализованные компоненты

### 1. Утилиты для работы с URL
**Файл:** `shared/utils/utils-url.js`

Основные функции:
- `addLanguageSuffix(path, locale)` - добавляет языковой суффикс
- `removeLanguageSuffix(path)` - удаляет языковой суффикс
- `processMenuUrl(path, locale)` - обрабатывает URL для меню
- `isStaticPath(path)` - проверяет, является ли путь статическим

### 2. Главное меню
**Файл:** `shared/menu-main/MenuMain.jsx`

- Все ссылки в меню теперь используют `processMenuUrl()`
- Автоматически добавляются языковые суффиксы для нестатических путей
- Статические пути остаются без изменений

### 3. Языковой переключатель
**Файл:** `shared/language-switcher/LanguageSwitcher.jsx`

- Использует стандартный Next.js i18n роутинг для переключения языков
- Автоматическое обновление URL с языковыми суффиксами происходит через хук `useLanguageUrl`
- Сохраняет текущий путь страницы

### 4. Автоматическое обновление URL
**Файл:** `shared/hooks/useLanguageUrl.js`

- Хук автоматически отслеживает изменения языка
- Обновляет URL с правильными языковыми суффиксами
- Интегрирован в `MainLayout` для работы на всех страницах

### 5. Breadcrumbs
**Файл:** `shared/breadcrumbs-page/BreadcrumbsPage.jsx`

- Все ссылки в breadcrumbs используют языковые суффиксы
- Соответствуют текущему языку страницы

### 6. Sitemap
**Файл:** `pages/sitemap.jsx`

- Все ссылки в sitemap генерируются с языковыми суффиксами
- Соответствуют текущему языку страницы

## Как это работает

### При клике на меню:
1. Пользователь кликает на пункт меню
2. `processMenuUrl()` проверяет, является ли путь статическим
3. Если статический - возвращает путь как есть
4. Если нестатический - добавляет языковой суффикс
5. Пользователь переходит на страницу с правильным URL

### При переключении языка:
1. Пользователь выбирает новый язык в переключателе
2. Next.js i18n роутинг переключает язык
3. Хук `useLanguageUrl` автоматически обновляет URL с правильным языковым суффиксом
4. Пользователь остается на той же странице, но с новым языком и правильным URL

## Поддерживаемые языки

| Код | Язык | Суффикс | Пример |
|-----|------|---------|--------|
| en | English | (без суффикса) | `/about/dr-serge-tunitski` |
| ru | Русский | -ru | `/about/dr-serge-tunitski-ru` |
| de | Deutsch | -de | `/about/dr-serge-tunitski-de` |
| fr | Français | -fr | `/about/dr-serge-tunitski-fr` |
| es | Español | -es | `/about/dr-serge-tunitski-es` |
| he | עברית | -he | `/about/dr-serge-tunitski-he` |
| ar | العربية | -ar | `/about/dr-serge-tunitski-ar` |

## Тестирование

Для тестирования системы:

1. **Откройте сайт на английском языке**
2. **Перейдите на любую страницу с slug'ом** (например, `/about/dr-serge-tunitski`)
3. **Переключите язык через переключатель**
4. **Проверьте, что URL изменился** (например, на `/about/dr-serge-tunitski-ru`)
5. **Проверьте, что контент перевелся** на выбранный язык
6. **Проверьте, что breadcrumbs работают** с новым URL
7. **Проверьте, что меню работает** с новым URL

## Важные замечания

- Статические страницы (без slug'а) не получают языковые суффиксы
- Английский язык остается без суффикса для обратной совместимости
- Все компоненты автоматически обрабатывают URL с суффиксами
- Система работает как при клике на меню, так и при переключении языка
